<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Birthday Irene</title>
  <style>
    :root{
      --bg:#3e2723; /* coklat tua */
      --paper:#6d4c41; /* kertas surat */
      --accent:#ffcc80;
    }
    html,body{height:100%;margin:0;font-family:Georgia, serif;background:var(--bg);color:#fff;overflow:hidden}
    /* COLLAGE (container foto) */
    .collage{
      position:fixed;inset:0;z-index:0;pointer-events:none; /* foto di belakang, tapi tetap hoverable via pointer-events toggled per-image */
    }
    .collage .photo{
      position:absolute;
      width:190px; /* basis */
      height:auto;
      border-radius:8px;
      box-shadow:0 8px 20px rgba(0,0,0,0.6);
      background:#222;
      transform-origin:center center;
      transition: transform .25s ease, box-shadow .25s ease;
      cursor:pointer;
      pointer-events:auto;
      border:6px solid rgba(255,255,255,0.06); /* polaroid-like edge */
    }
    .collage .photo:hover{
      transform:translateY(-8px) scale(1.12);
      box-shadow:0 18px 30px rgba(0,0,0,0.7);
      z-index:9999 !important;
    }

    /* START SCREEN (gift) */
    .center {
      position: absolute;
      top:50%; left:50%;
      transform:translate(-50%,-50%);
      text-align:center;
      z-index: 3000;
    }
    .gift{
      font-size:88px;
      cursor:pointer;
      user-select:none;
      animation: bounce 1.2s infinite;
      filter: drop-shadow(0 8px 12px rgba(0,0,0,0.6));
    }
    @keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}

    .hint{
      margin-top:12px;color:#ffe9cf;font-size:18px;
    }

    /* LETTER */
    .overlay{
      position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
      background:rgba(0,0,0,0.45);z-index:3500;backdrop-filter: blur(2px);
      display:none; /* tampil setelah buka */
    }
    .letter{
      width:86%;max-width:760px;background:var(--paper);color:#fff3e0;padding:30px;border-radius:12px;
      box-shadow:0 18px 40px rgba(0,0,0,0.6);transform-origin:center;animation:openLetter .8s ease forwards;
    }
    @keyframes openLetter{
      from{transform:translateY(10vh) scale(.9) rotateX(12deg);opacity:0}
      to{transform:translateY(0) scale(1) rotateX(0);opacity:1}
    }
    .letter h1{color:var(--accent);margin:0 0 12px 0;font-size:28px}
    .letter p{margin:10px 0;line-height:1.6;font-size:16px;color:#fff3e0;text-align:justify}

    /* hearts falling */
    .heart{
      position:fixed;top:-30px;font-size:22px;pointer-events:none;
      animation: fall linear forwards;
      z-index:4000;
    }
    @keyframes fall{
      to{transform:translateY(110vh);opacity:0}
    }

    /* small responsive tweak */
    @media(max-width:720px){
      .collage .photo{width:120px}
      .gift{font-size:64px}
      .letter{padding:22px;font-size:15px}
    }
  </style>
</head>
<body>

  <!-- collaged photos will be appended here by JS -->
  <div class="collage" id="collage"></div>

  <!-- start / gift -->
  <div class="center" id="startScreen">
    <div class="gift" id="giftBtn" title="Klik untuk membuka hadiah">üéÅ</div>
    <div class="hint">Pencet kotak hadiahnya ya cantik üíå</div>
  </div>

  <!-- overlay surat -->
  <div class="overlay" id="overlay">
    <div class="letter" id="letter">
      <h1>Selamat Ulang Tahun, Irenekamila Putri ü§é</h1>
   <p>
    Hari ini, dunia terasa lebih indah‚Ä¶ karena seseorang yang paling berharga di hidupku dilahirkan.
    Irenekamila putri, kamu bukan cuma perempuan cantik dengan senyum kamu yang selalu bikin aku jatuh hati,
    tapi juga sosok yang selalu memberi warna di hari-hariku.
  </p>
  <p>
    Aku bersyukur bisa punya kamu di sampingku. Setiap tawa, setiap cerita, setiap detik sama kamu adalah hadiah terbesar buatku.
    Aku janji, aku akan terus ada, nemenin kamu dalam susah maupun senang, sekarang dan selamanya.
  </p>
  <p>
    Selamat ulang tahun, cintaku. Semoga semua mimpi kamu tercapai, dan semoga aku selalu jadi alasan kamu tersenyum.
    Aku cinta kamu lebih dari yang bisa aku ungkapkan dengan kata-kata. üíñ
  </p>
    </div>
  </div>

  <!-- audio (pastikan ganti file ke lagu asli di folder yang sama) -->
  <audio id="bgMusic" loop preload="auto">
    <source src="lesungpipi.mp3" type="audio/mpeg">
  </audio>

<script>
/*
  INSTRUKSI FAST:
  - Taruh index.html ini di folder yang sama dengan foto (foto1..foto10.*) dan file audio (lesungpipi.mp3).
  - Kalau nama fotomu berbeda, ubah array `filenames` di bawah.
  - Script akan mencoba load tiap file; kalau file tidak ada, ia akan di-skip (aman).
*/

const collageEl = document.getElementById('collage');
const giftBtn = document.getElementById('giftBtn');
const overlay = document.getElementById('overlay');
const letter = document.getElementById('letter');
const bgMusic = document.getElementById('bgMusic');

// default filenames ‚Äî ubah ini jika nama file kamu lain
const filenames = [
  "foto1.jpg",
  "foto2.jpg",
  "foto3.jpg", // aman kalau ada atau tidak ‚Äî akan di-skip bila tidak ada
  "foto4.jpg",
  "foto5.jpg",
  "foto6.jpg",
  "foto7.jpg",
  "foto8.jpg",
  "foto9.jpg",
  "foto10.jpg"
];

// LIMIT jumlah foto ditampilkan (ambil max 10)
const MAX_PHOTOS = 10;

// utility: coba preload image, resolve jika exist
function testImage(src){
  return new Promise((resolve) => {
    const img = new Image();
    img.onload = () => resolve(src);
    img.onerror = () => resolve(null);
    img.src = src;
  });
}

// buat elemen foto dan random posisi / ukuran / rotasi / z
function placePhoto(src, index){
  const el = document.createElement('img');
  el.className = 'photo';
  el.src = src;

  // random ukuran dasar
  const baseW = 140 + Math.random()*160; // 140 - 300px
  el.style.width = baseW + 'px';

  // random pos (boleh overlap sedikit)
  // gunakan viewport units untuk fleksibel
  const x = Math.random() * 90; // left (vw)
  const y = Math.random() * 85; // top (vh)
  const r = (Math.random()*40 - 20); // rotasi -20..+20
  const s = (0.85 + Math.random()*0.6).toFixed(2); // scale

  el.style.left = x + 'vw';
  el.style.top = y + 'vh';
  el.style.transform = `rotate(${r}deg) scale(${s})`;

  // random z-index to cause stacking
  const z = 5 + Math.floor(Math.random()*50);
  el.style.zIndex = z;

  // small click/tap: bring to front permanent (nice interactive)
  el.addEventListener('click', (ev) => {
    // raise z to top when clicked
    el.style.zIndex = 99999;
    // tiny wiggle for fun
    el.style.transition = 'transform .12s ease';
    el.style.transform = `rotate(${r}deg) scale(${parseFloat(s)+0.08}) translateY(-6px)`;
    setTimeout(()=>{ el.style.transform = `rotate(${r}deg) scale(${s})`; }, 500);
    ev.stopPropagation();
  });

  // append
  collageEl.appendChild(el);
}

// main: load all available images (up to MAX_PHOTOS)
(async function loadPhotos(){
  let loaded = [];
  for(const name of filenames){
    if(loaded.length >= MAX_PHOTOS) break;
    const ok = await testImage(name);
    if(ok) loaded.push(ok);
  }
  // if none loaded, show a subtle message
  if(loaded.length === 0){
    console.warn('No photos loaded ‚Äî cek nama file atau letak file.');
    // optional: show a faint patterned background
    collageEl.style.background = 'linear-gradient(135deg, rgba(0,0,0,0.25), rgba(0,0,0,0.05))';
    return;
  }
  // shuffle loaded array so layout different each reload
  function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } return a }
  loaded = shuffle(loaded);

  for(let i=0;i<loaded.length;i++){
    placePhoto(loaded[i], i);
  }
})();

// Open letter when gift clicked
giftBtn.addEventListener('click', () => {
  document.getElementById('startScreen').style.display = 'none';
  overlay.style.display = 'flex';
  // try to play music ‚Äî browsers allow play after user gesture (click)
  bgMusic.play().catch(e => {
    console.warn('Audio play blocked:', e);
  });
  spawnHearts();
});

// clicking overlay outside letter closes it
overlay.addEventListener('click', (e) => {
  if(e.target === overlay){
    overlay.style.display = 'none';
    document.getElementById('startScreen').style.display = 'block';
    // pause music if desired:
    // bgMusic.pause();
  }
});

// spawn hearts
function spawnHearts(){
  const interval = setInterval(() => {
    const h = document.createElement('div');
    h.className = 'heart';
    h.style.left = (Math.random()*92 + 2) + 'vw';
    h.style.fontSize = (16 + Math.random()*18) + 'px';
    h.style.animationDuration = (3 + Math.random()*2) + 's';
    h.style.opacity = 0.95;
    h.innerHTML = 'üíñ';
    document.body.appendChild(h);
    setTimeout(()=>h.remove(), 5200);
  }, 360);
}
</script>
</body>
</html>
